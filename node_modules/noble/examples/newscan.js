var noble = require('noble');

function sleep(milliseconds) {
	var start = new Date().getTime();
		for (var i= 0; i < 1e7; i++) {
			if ((new Date().getTime() - start) > milliseconds) { 
			break;
			}
	}
}

noble.on('stateChange', function(state) {
  if (state === 'poweredOn') {
    noble.startScanning([], true);
  } else {
    noble.stopScanning();
  }
});

noble.on('discover', function(peripheral) {
	var macAdress = peripheral.address;
	var rss = peripheral.rssi;
	var localName = peripheral.advertisement.localName;
	var package = peripheral.advertisement.manufacturerData
	
	while(1) { 	
		console.log('Device MAC address: ', macAdress, ' Rss: ', rss, ' Local Name: ', localName,  '\nPackage Data: ', package);
	}

});



